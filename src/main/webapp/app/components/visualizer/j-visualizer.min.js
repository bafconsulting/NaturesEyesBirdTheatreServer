(function(){var a,b={}.hasOwnProperty;this.Visualizer=a=Ember.Object.extend({world:null,scenes:Ember.computed(function(){return{}}),modules:Ember.computed(function(){return Ember.Object.create()}).property(),associations:Ember.computed(function(){return Ember.Object.create()}).property(),timers:Ember.computed(function(){return{}}),init:function(b){return this.useWorld(b),this.set("color",a.Colorer.create({visualizer:this}))},useWorld:function(b){return this.set("world",a.World.create({worldObj:$(b),visualizer:this}))},addModule:function(a,b,c){var d;return Em.isArray(c)&&("undefined"!=typeof console&&null!==console&&"function"==typeof console.log&&console.log("Content Array parameter for addModule is deprecated - please pass an Object of default properties instead. (Use `{content: content}` for old behaviour)"),c={model:c}),d=$.extend({visualizer:this,key:b},c),this.set("modules."+b,a.create(d)),this},refresh:function(){var a;return this.get("world.loaded")&&null!=(a=this.get("currentScene"))?a.reload():void 0}.observes("currentScene","world.loaded","world.width","world.height"),useScenes:function(b){var c,d,e,f;for(null==b&&(b=[]),a.Utils.isArray(b)||("undefined"!=typeof console&&null!==console&&"function"==typeof console.log&&console.log("Object({})-type input for useScenes is deprecated - please pass an Array instead."),b=b.visualizer_scenes),d=0,e=b.length;e>d;d++)c=b[d],c.visualizer=this,this.set("scenes."+c.identifier,a.Scene.create(c));return this.get("currentScene")||this.setScene(null!=(f=b[0])?f.identifier:void 0),this},setScene:function(a){return this.set("currentScene",this.get("scenes."+a))},destroy:function(){var a,c,d,e;d=this.get("modules"),e=[];for(c in d)b.call(d,c)&&(a=d[c],e.push("function"==typeof a.destroy?a.destroy():void 0));return e}})}).call(this),function(){this.Visualizer.Colorer=Ember.Object.extend({visualizer:null,init:function(){return this.get("_assignedUniq"),this.get("uniquePalette"),this._setUniqueProps()},freshColorPalette:function(){return this.get("_colorScheme").copy()},fixed:function(a){return null==a&&(a=""),null!=a&&(a=""+a.toLowerCase()).length?this.get("_fixedVals."+a)||this._rotating_color(a):this.get("_defaultVal")},uniquePalette:Ember.computed(function(){return{}}),_assignedUniq:Ember.computed(function(){return{}}),unique:function(a,b){return null==a&&(a=""),null==b&&(b="main"),this.get("_assignedUniq."+b+"."+a)},_setUniqueProps:function(){return this.unique.next=function(a){return function(b){return null==b&&(b="main"),a.unique._prepareSet(b),a.get("uniquePalette."+b+".0")}}(this),this.unique.assign=function(a){return function(b,c){var d;return null==c&&(c="main"),a.unique._prepareSet(c),null!=b&&null==a.unique(b,c)?(d=a.get("uniquePalette."+c).shift()||a.get("_defaultAssigned"),a.set("_assignedUniq."+c+"."+b,d)):void 0}}(this),this.unique.unassign=function(a){return function(b,c){var d;return null==c&&(c="main"),a.unique._prepareSet(c),null!=b&&(d=a.unique(b,c),null!=d&&d!==a.get("_defaultUnassigned"))?(d!==a.get("_defaultAssigned")&&a.get("uniquePalette."+c).push(d),delete a.get("_assignedUniq."+c)[b],a.get("uniquePalette."+c+".0")):void 0}}(this),this.unique.resetSet=function(a){return function(b){return a.get("_assignedUniq")[b]={},a.get("uniquePalette")[b]=a.freshColorPalette().shuffleVals()}}(this),this.unique._prepareSet=function(a){return function(b){return null==a.get("uniquePalette."+b)?a.unique.resetSet(b):void 0}}(this)},_defaultAssigned:"#5895B2",_defaultUnassigned:"#8da3b0",_colorScheme:["#3498DB","#9B59B6","#F2CA27","#34495E","#1ABC9C","#E74C3C","#95A5A6","#ECF0F1","#2ECC71","#5895B2"],_rotating_color_val:Ember.computed(function(){return{}}),_rotating_keys_used:0,_rotating_color:function(a){var b,c;return null!=a?((b=this.get("_rotating_color_val."+a))||(c=this.get("_colorScheme"),b=c[this._rotating_keys_used++%c.length],this.set("_rotating_color_val."+a,b)),b):void 0},_defaultVal:Ember.computed(function(){var a;return(null!=(a=window.colors)?a.defaultSingle:void 0)||this.get("_defaultAssigned")}),_fixedVals:{blog:"#28cfc5",board:"#FB913F",twitter:"#2AA9E0",facebook:"#4D69A2",google:"#DD4C39",youtube:"#E14D42",instagram:"#FFCB33",linkedin:"#1E87BD",male:"#29A0CE",unisex:"#d6dadb",female:"#FC4482",positive:"#74B81D",negative:"#E74C3C",neutral:"#A8CEE0",unknown:"#d6dadb"}})}.call(this),function(){var a={}.hasOwnProperty;this.Visualizer.Scene=Ember.Object.extend({visualizer:null,identifier:null,title:null,description:null,drawWait:100,fullRefreshWait:20,widgets:Ember.computed(function(){return[]}),requestedModuleViews:function(){var a,b,c,d,e,f,g;for(b={},g=this.get("widgets"),d=0,e=g.length;e>d;d++)c=g[d],a=null!=b[f=c.module]?b[f]:b[f]={},a[c.view]=!0;return b}.property("widgets.[]"),clearUnusedViews:function(){var b,c,d,e,f,g;f=this.get("visualizer.modules");for(c in f)if(a.call(f,c)){b=f[c],g=null!=b?b.get("moduleViews"):void 0;for(e in g)a.call(g,e)&&(d=g[e],this.get("requestedModuleViews."+c+"."+e)||null!=d&&"function"==typeof d.clear&&d.clear())}return this},runWidgets:function(a){var b,c,d;for(null==a&&(a=this.get("widgets")),c=0,d=a.length;d>c;c++)b=a[c],this._runWidget(b);return this},_runWidget:function(a){var b;return null==a&&(a={}),b="visualizer.modules."+a.module+".moduleViews."+a.view,Visualizer.Utils.waitForRepeatingEvents(function(c){return function(){var d;return null!=(d=c.get(b))?d.run(a.operation,a.params):void 0}}(this),this.get("drawWait"),"Scene Redraw for "+b,this.get("visualizer.timers"))},reload:function(){return Visualizer.Utils.waitForRepeatingEvents(function(a){return function(){return a.clearUnusedViews(),a.runWidgets()}}(this),this.get("fullRefreshWait"),"Full Scene Reload",this.get("visualizer.timers"))}})}.call(this),function(){var a;this.Visualizer.World=Ember.Object.extend({loaded:Ember.computed.gt("worldObj.length",0),$:function(a){return null!=a?this.get("worldObj").find(a):this.get("worldObj")},resize:function(){var a,b,c;return a=this.get("worldObj"),a.length?(b=this.get("worldObj").offset(),this.setProperties({width:a.innerWidth(),height:c=a.innerHeight(),top:b.top,left:b.left})):void 0}.observes("worldObj").on("init"),_bindGlobalEvents:function(){return $(window).on("resize",function(a){return function(){return a.resize()}}(this))}.on("init"),_bindWorldEvents:function(){var b;return(b=this.$()).length?b.off("click",".phasedButton",a).on("click",".phasedButton",a):void 0}.observes("worldObj").on("init")}),a=function(a){return $(this).hasClass("disabledItem")?(a.stopImmediatePropagation(),!1):Ember.run.next(this,function(){return $(this).addExpiringClass("disabledItem",2e3)})}}.call(this),function(){Array.prototype.removeInstancesOf=function(a){for(var b;;){if(-1===(b=this.indexOf(a)))break;this.splice(b,1)}return this},Array.prototype.shuffleVals=function(){var a,b,c,d,e,f;for(a=e=0,f=this.length;f>e;a=++e)b=this[a],c=Math.floor(Math.random()*(a+1)),d=b,this[a]=this[c],this[c]=d;return this}}.call(this),function(){Ember.Object.reopen({values:function(){var a,b,c,d,e;for(d=Object.keys(this),e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(this[a]);return e}})}.call(this),function(){jQuery.fn.extend({addExpiringClass:function(a,b){return null==a&&(a="disabled"),null==b&&(b=1e3),this.addClass(a),setTimeout(function(b){return function(){return b.removeClass(a)}}(this),b)}})}.call(this),function(){String.prototype.truncateTo=function(a,b){var c;return null==b&&(b="â€¦"),c=b.length,(isNaN(a)||c>=a)&&(a=b.length+1),this.length>a?this.substr(0,a-c)+b:this},String.prototype.advancedIndexOf=function(a,b){var c;return null==b&&(b={}),c=this,b.isCaseInsensitive&&(c=c.toLowerCase(),a=a.toLowerCase()),c.indexOf(a)},String.prototype.includes=function(a,b){return this.advancedIndexOf(a,{isCaseInsensitive:b})>=0},String.prototype.beginsWith=function(a,b){return 0===this.advancedIndexOf(a,{isCaseInsensitive:b})},String.prototype.capitalizeLetter=function(a){var b;return null==a&&(a=0),b=0===a?"":this.slice(0,a),b+this.charAt(a).toUpperCase()+this.slice(a+1)},String.prototype.titleize=function(){return this.toLowerCase().replace(/\b\w/g,function(a){return a.toUpperCase()})},String.prototype.removeInitialUnderscore=function(){return this.replace(/^_/,"")}}.call(this),function(){var a;this.Visualizer.Utils={existsWithValue:function(a){return"undefined"!=typeof a&&null!==a},waitForRepeatingEvents:function(){var a,b;return b={},a=function(a,c,d,e){var f;return null==d&&(d="default timer"),null==e&&(e=b),f=e[d],f&&clearTimeout(f),e[d]=setTimeout(a,c)}}(),minVal:function(a,b){return b>=a?a:b},maxVal:function(a,b){return a>=b?a:b},boundedVal:function(a,b,c){return b>a?b:a>c?c:a},randBetween:function(a,b){return null==a&&(a=0),null==b&&(b=10),Math.random()*(b-a)+a},randIntBetween:function(a,b){return Math.floor(Visualizer.Utils.randBetween(a,b)||4)},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},relativeSizeString:function(a,b){var c;return c=parseInt(a),"string"==typeof a&&a.indexOf("%")>=0?c/100*b:isFinite(c)?c:void 0},intersectionSafe:function(a,b){var c,d,e;for(c=0,d=0,e=[];c<a.length&&d<b.length;)a[c]<b[d]?c++:a[c]>b[d]?d++:(e.push(c),c++,d++);return e},intersectionCount:function(a,b){var c,d,e;for(c=0,d=0,e=0;c<a.length&&d<b.length;)a[c]<b[d]?c++:a[c]>b[d]?d++:(e++,c++,d++);return e},cloneArray:function(a){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log&&console.log("cloneArray function is deprecated, please use Array.copy()"),a.slice(0)}},Visualizer.Utils.updateKCodePosition=function(a,b){return 38===a?2>b?2>b&&(b+=1):b>2&&(b=1):(40!==a||2!==b&&3!==b)&&(37!==a||4!==b&&6!==b)&&(39!==a||5!==b&&7!==b)?66===a&&8===b?b+=1:b=65===a&&9===b?10:0:b+=1,b},a=function(a,b){return a>8&&(a=Math.floor(10*Math.random()+a-5)),b>8&&(b=Math.floor(10*Math.random()+b-5)),"http://placekitten.com/"+a+"/"+b}}.call(this),function(){this.Visualizer.Module=Ember.ArrayController.extend({visualizer:null,maxLength:100,content:Em.computed.alias("model"),model:Ember.computed(function(){return Ember.A()}).property(),dataset:Ember.computed.defaultTo("arrangedContent"),moduleViews:Ember.computed(function(){return Ember.Object.create()}).property(),defaultViews:Ember.computed(function(){return{}}),setDefaultViews:function(){return Visualizer.Utils.waitForRepeatingEvents(function(a){return function(){var b,c,d,e,f;for(e=a.get("requestedViews").uniq(),f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(a.addView(b));return f}}(this),10,"Set Default Views for Module "+this.get("key"),this.get("visualizer.timers"))}.observes("requestedViews.[]").on("init"),addView:function(a,b){var c;return null==b&&(b=this.get("defaultViews."+a)),c=this.get("moduleViews."+a),c||null==b||(c=new b(this),this.set("moduleViews."+a,c),this.requestRedraw()),c||null},requestedViews:function(){return Object.keys(this.get("visualizer.currentScene.requestedModuleViews."+this.get("key"))||{})}.property("visualizer.currentScene.requestedModuleViews"),trySetDefaultViews:function(){return"function"==typeof this.setDefaultViews?this.setDefaultViews():void 0}.on("init"),requestRedraw:function(){var a,b,c;return b=this.get("visualizer.currentScene"),a=this.get("key"),null!=b&&null!=a?b.runWidgets(null!=(c=b.get("widgets"))?c.filterBy("module",a):void 0):void 0},forceLimit:function(a){var b;return null==a&&(a="timestamp"),b=this.get("dataset").sort(function(b,c){return c[a]-b[a]}),this.set("dataset",b.slice(0,this.get("maxLength")))},groupedBy:function(a){var b,c,d,e;return b=a.replace(".","__"),c="__groupedBy_"+b,null==(e=this.get(c))&&(d={},d[c]=function(){return this._groupedBy(a).sort(function(a,b){return b.length-a.length})}.property("dataset.@each."+a),this.reopen(d)),e||this.get(c)},_groupedBy:function(a){var b,c,d,e,f,g;for(b=Ember.Object.create(),g=this.get("dataset"),e=0,f=g.length;f>e;e++)c=g[e],d=Ember.get(c,a),(null!=b[d]?b[d]:b[d]=[]).push(c);return b.values()}})}.call(this),function(){this.Visualizer.ModuleView=Ember.Object.extend({module:null,containerSelector:null,previousSelectors:Ember.computed(function(){return[]}),visualizer:Ember.computed.alias("module.visualizer"),data:Ember.computed.alias("module.dataset"),arrangedContent:Ember.computed.alias("module.arrangedContent"),dimensionsDidChange:!0,init:function(a){return this.set("module",a)},clear:function(){},destroy:function(){return this.clear()},run:function(a,b){return null==b&&(b={}),b.container&&this.updateSelector(b.container),this._presetContainerAttrs(b),"function"==typeof this[a]?this[a](b):void 0},updateSelector:function(a){var b;return a!==(b=this.get("containerSelector"))?(this.clear(),this.get("previousSelectors").push(b),this.set("containerSelector",a)):void 0},$container:function(a){var b;return b=a?" "+a:"",this.get("visualizer.world").$(""+this.get("containerSelector")+b)},hardReset:function(){return this.set("dimensionsDidChange",!0),this.get("module").requestRedraw()}.observes("data.[]"),widgetParamedOutlineCSS:function(a){var b,c,d,e,f;for(null==a&&(a={}),b={},f=["width","height","left","top"],d=0,e=f.length;e>d;d++)c=f[d],null!=a[c]&&(b[c]=""+this.get(c)+"px");return b},width:function(a,b){return this._updateDimension(a,b)}.property(),height:function(a,b){return this._updateDimension(a,b)}.property(),_updateDimension:function(a,b){var c;return null!=b&&(b=Math.floor(b),b!==(c=this.get(a))&&this.set("dimensionsDidChange",!0)),b},_presetContainerAttrs:function(a){var b;return null==a&&(a={}),null!=a.width&&null!=a.height||(b=this.$container(),null==a.width&&this.set("width",b.width()),null!=a.height)?void 0:this.set("height",b.height())}})}.call(this),function(){Visualizer.ModuleView.ResizableMixin=Ember.Mixin.create({run:function(a,b){return null==b&&(b={}),this._updateSize(b),this._super(a,b)},_updateSize:function(a){var b,c,d,e,f;for(null==a&&(a={}),this.get("visualizer.world").resize(),e=[{key:"width"},{key:"height"},{key:"left",req:"width"},{key:"top",req:"height"}],f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(this._tryUpdateValue(b.key,a[b.key],a,b.req));return f},_tryUpdateValue:function(a,b,c,d){var e,f;return null==c&&(c={}),null==d&&(d=a),null!=b&&(null!=c.padding&&(f=Visualizer.Utils.relativeSizeString(c.padding,this.get("visualizer.world."+d))),f=null!=f?f:15,e=Math.floor(Visualizer.Utils.relativeSizeString(b,this.get("visualizer.world."+d))-f),isFinite(e)&&this.get(a)!==e)?(this.set(a,e),!0):!1}})}.call(this);